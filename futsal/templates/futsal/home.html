{% extends 'futsal/base.html' %}
{% load custom_filters %}
{% load static %}
{% block content %}
<section class="relative bg-gradient-to-r from-green-600 to-green-800 text-white py-20 px-4 sm:px-6 lg:px-8 text-center dark:from-green-800 dark:to-green-900 overflow-hidden hero-slideshow min-h-[60vh] md:min-h-[70vh] lg:min-h-[80vh]">
  <div class="hero-slideshow-backgrounds">
    {% for img in gallery %}
      <div class="slideshow-image" style="background-image: url(&quot;{% static img.static_path %}&quot;); animation-delay: {{ forloop.counter0 | mul:4 }}s;"></div>
    {% endfor %}
  </div>
  <div class="absolute inset-0 bg-black opacity-50 z-20"></div> <!-- Overlay for text readability, above images -->
  <div class="relative z-30 max-w-3xl mx-auto animate-fade-in-up" data-animation-delay="0.2">
    <h2 class="text-5xl font-extrabold mb-4 leading-tight transform -translate-y-4 opacity-0 animate-slide-in-up" data-animation-delay="0.4">{{ futsal.name|default:"Unity Futsal Arena" }}</h2>
    <p class="text-xl mb-8 opacity-0 transform -translate-y-4 animate-slide-in-up" data-animation-delay="0.6">{{ futsal.tagline|default:"Your ultimate destination for thrilling futsal action!" }}</p>

    <div class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-6 opacity-0 animate-fade-in-up" data-animation-delay="0.8">
      <a href="tel:{{ futsal.phone|default:'#' }}" class="inline-flex items-center justify-center px-8 py-4 border border-transparent text-base font-medium rounded-full text-green-700 bg-white hover:bg-gray-100 dark:text-green-900 dark:bg-gray-200 dark:hover:bg-gray-300 transition duration-300 shadow-lg transform hover:scale-105">
        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"></path></svg>
        {{ futsal.phone|default:"Call Now" }}
      </a>
      <a href="https://wa.me/{{ futsal.whatsapp|default:'#' }}" class="inline-flex items-center justify-center px-8 py-4 border border-transparent text-base font-medium rounded-full text-white bg-green-700 hover:bg-green-600 dark:bg-green-900 dark:hover:bg-green-700 transition duration-300 shadow-lg transform hover:scale-105">
        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"></path><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd"></path></svg>
        {{ futsal.whatsapp|default:"WhatsApp Us" }}
      </a>
    </div>
  </div>
</section>

<style>
  @keyframes fade-in-up {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slide-in-up {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in-up {
    animation: fade-in-up 0.6s ease-out forwards;
  }

  .animate-slide-in-up {
    animation: slide-in-up 0.6s ease-out forwards;
  }

  /* Slideshow CSS */
  .hero-slideshow {
    position: relative;
    min-height: 100vh; /* Make it full viewport height */
  }

  .hero-slideshow-backgrounds {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    z-index: 10;
  }

  .slideshow-image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-size: cover;
    background-position: center;
    opacity: 0;
    animation: slideshow-fade {% if gallery %}{{ gallery|length | mul:4 }}{% else %}16{% endif %}s infinite; /* 4s per image, adjust based on dynamic images */
  }

  /* Add more :nth-child rules if you add more dynamic images */

  @keyframes card-slide-in {
    from {
      opacity: 0;
      transform: translateY(50px) scale(0.9); /* More pronounced starting point */
    }
    70% {
      opacity: 1;
      transform: translateY(-5px) scale(1.02); /* Overshoot slightly */
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  @keyframes slideshow-fade {
    0% { opacity: 0; }
    8% { opacity: 1; } /* Fade in */
    25% { opacity: 1; } /* Hold */
    33% { opacity: 0; } /* Fade out */
    100% { opacity: 0; }
  }
</style>


<section class="py-16 px-4 sm:px-6 lg:px-8 max-w-6xl mx-auto">
  <h3 class="text-4xl font-extrabold text-gray-900 mb-12 text-center dark:text-white animate-fade-in-up" data-animation-delay="1.0">Our State-of-the-Art <span class="text-green-600">Facilities</span></h3>
  <div class="grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10">
    {% for facility in facilities %}
      <div class="bg-white dark:bg-gray-800 rounded-xl shadow-xl overflow-hidden transform hover:-translate-y-3 hover:shadow-2xl transition duration-300 ease-in-out animate-card-slide-in group relative border-2 border-transparent hover:border-green-500" data-animation-delay="{{ forloop.counter | add:1 | mul:0.2 }}">
        <div class="relative h-56 w-full bg-cover bg-center group-hover:scale-110 transition-transform duration-500" style="background-image: url('{% if facility.image %}{{ facility.image.url }}{% else %}{% static "gallery/futsal.jpg" %}{% endif %}');">
          <div class="absolute inset-0 bg-black opacity-40 group-hover:opacity-70 transition-opacity duration-300"></div>
        </div>
        <div class="p-6">
          <h4 class="text-2xl font-semibold text-gray-800 dark:text-gray-100 mb-3">{{ facility.title }}</h4>
          <p class="text-gray-600 dark:text-gray-300 leading-relaxed">{{ facility.description }}</p>
        </div>
      </div>
    {% empty %}
      <p class="col-span-full text-center text-gray-600 dark:text-gray-400 animate-fade-in-up" data-animation-delay="1.2">No facilities listed yet. Check back soon!</p>
    {% endfor %}
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('[data-animation-delay]').forEach(function(element) {
      const delay = element.getAttribute('data-animation-delay');
      if (delay) {
        element.style.animationDelay = `${delay}s`;
      }
    });
  });
</script>
{% endblock %}
