{% extends 'futsal/base.html' %}
{% load custom_filters %}
{% load static %}
{% block title %}Home | Unity Futsal{% endblock %}

{% block content %}
<section class="relative bg-gradient-to-r from-green-600 to-green-800 text-white py-20 px-4 sm:px-6 lg:px-8 text-center dark:from-green-800 dark:to-green-900 overflow-hidden hero-slideshow">
  <div class="hero-slideshow-backgrounds">
    {% comment %}
      User-specified images for background slideshow.
      These can be dynamically loaded via 'hero_background_images' context variable from the view.
      Example: context = {'hero_background_images': [
      ]}
    {% endcomment %}
    <div class="slideshow-image" style="background-image: url(&quot;{% static 'gallery/attack.jpg' %}&quot;); animation-delay: 0s;"></div>
    <div class="slideshow-image" style="background-image: url(&quot;{% static 'gallery/ball.jpg' %}&quot;); animation-delay: 4s;"></div>
    <div class="slideshow-image" style="background-image: url(&quot;{% static 'gallery/boot.jpg' %}&quot;); animation-delay: 8s;"></div>
    <div class="slideshow-image" style="background-image: url(&quot;{% static 'gallery/futsal.jpg' %}&quot;); animation-delay: 12s;"></div>
  </div>
  <div class="absolute inset-0 bg-black opacity-50 z-20"></div> <!-- Overlay for text readability, above images -->
  <div class="relative z-30 max-w-3xl mx-auto animate-fade-in-up" data-animation-delay="0.2">
    <h2 class="text-5xl font-extrabold mb-4 leading-tight transform -translate-y-4 opacity-0 animate-slide-in-up" data-animation-delay="0.4">{{ futsal.name|default:"Unity Futsal Arena" }}</h2>
    <p class="text-xl mb-8 opacity-0 transform -translate-y-4 animate-slide-in-up" data-animation-delay="0.6">{{ futsal.tagline|default:"Your ultimate destination for thrilling futsal action!" }}</p>

    <div class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-6 opacity-0 animate-fade-in-up" data-animation-delay="0.8">
      <a href="tel:{{ futsal.phone|default:'#' }}" class="inline-flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-md text-green-700 bg-white hover:bg-gray-100 dark:text-green-900 dark:bg-gray-200 dark:hover:bg-gray-300 transition duration-300 shadow-md">
        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"></path></svg>
        {{ futsal.phone|default:"Call Now" }}
      </a>
      <a href="https://wa.me/{{ futsal.whatsapp|default:'#' }}" class="inline-flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-md text-white bg-green-700 hover:bg-green-600 dark:bg-green-900 dark:hover:bg-green-700 transition duration-300 shadow-md">
        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"></path><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd"></path></svg>
        {{ futsal.whatsapp|default:"WhatsApp Us" }}
      </a>
    </div>
  </div>
</section>

<style>
  @keyframes fade-in-up {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slide-in-up {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in-up {
    animation: fade-in-up 0.6s ease-out forwards;
  }

  .animate-slide-in-up {
    animation: slide-in-up 0.6s ease-out forwards;
  }

  /* Slideshow CSS */
  .hero-slideshow {
    position: relative;
    height: 500px; /* Adjust height as needed */
    background-color: #333; /* Fallback background */
  }

  .hero-slideshow-backgrounds {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    z-index: 10; /* Below overlay, above section background */
  }

  .slideshow-image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-size: cover;
    background-position: center;
    opacity: 0;
    animation: slideshow-fade 20s infinite; /* 5 images * 4s per image = 20s cycle */
  }

  /* Add more :nth-child rules if you add more dynamic images */

  @keyframes card-slide-in {
    from {
      opacity: 0;
      transform: translateY(50px) scale(0.9); /* More pronounced starting point */
    }
    70% {
      opacity: 1;
      transform: translateY(-5px) scale(1.02); /* Overshoot slightly */
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  @keyframes slideshow-fade {
    0% { opacity: 0; }
    8% { opacity: 1; } /* Fade in */
    25% { opacity: 1; } /* Hold */
    33% { opacity: 0; } /* Fade out */
    100% { opacity: 0; }
  }
</style>


<section class="py-16 px-4 sm:px-6 lg:px-8 max-w-6xl mx-auto">
  <h3 class="text-3xl font-bold text-gray-800 mb-10 text-center dark:text-gray-100 animate-fade-in-up" data-animation-delay="1.0">Our State-of-the-Art Facilities</h3>
  <div class="grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
    {% comment %}
      Dynamic Facilities: Iterate over a list of facility objects.
      Each facility object should have 'title', 'description', and optionally 'image_url' attributes.
      Example usage in Django view:
      context = {'facilities': [{'title': 'Indoor Court', 'description': 'All-weather, professional-grade indoor futsal court.', 'image_url': 'https://via.placeholder.com/400x250/10B981/FFFFFF?text=Facility+1'}, ...]}
    {% endcomment %}
    {% for facility in facilities %}
      <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden transform hover:-translate-y-2 hover:shadow-xl transition duration-300 ease-in-out animate-card-slide-in group relative border-2 border-transparent group-hover:border-green-500" data-animation-delay="{{ forloop.counter | add:1 | mul:0.2 }}">
        <div class="relative h-48 w-full bg-cover bg-center group-hover:scale-105 transition-transform duration-300" style="background-image: url('{% if facility.image %}{{ facility.image.url }}{% else %}{% static "gallery/futsal.jpg" %}{% endif %}');">
          <div class="absolute inset-0 bg-black opacity-40 group-hover:opacity-70 transition-opacity duration-300"></div>
        </div>
        <div class="p-6 pt-2">
          <h4 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2">{{ facility.title }}</h4>
          <p class="text-gray-600 dark:text-gray-300">{{ facility.description }}</p>
        </div>
      </div>
    {% empty %}
      <p class="col-span-full text-center text-gray-600 dark:text-gray-400 animate-fade-in-up" data-animation-delay="1.2">No facilities listed yet. Check back soon!</p>
    {% endfor %}
  </div>
</section>

<section class="py-16 px-4 sm:px-6 lg:px-8 max-w-6xl mx-auto bg-gray-50 dark:bg-gray-900">
  <h3 class="text-3xl font-bold text-gray-800 mb-10 text-center dark:text-gray-100 animate-fade-in-up" data-animation-delay="{{ facilities|length | add:1 | mul:0.2 }}">Gallery: Moments of Glory</h3>
  <div class="grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
    {% comment %}
      Dynamic Gallery: Iterate over a list of image objects.
      Each image object should have 'image.url' (path to image) and 'caption' attributes.
      Example usage in Django view:
      context = {'gallery': [
        {'image': {'url': 'https://via.placeholder.com/600x400/FF0000/FFFFFF?text=Match+Action'}, 'caption': 'Intense Match Action'},
        {'image': {'url': 'https://via.placeholder.com/600x400/0000FF/FFFFFF?text=Team+Celebration'}, 'caption': 'Team Celebration'},
        {'image': {'url': 'https://via.placeholder.com/600x400/008000/FFFFFF?text=Futsal+Court'}, 'caption': 'Our State-of-the-Art Court'}
      ]}
    {% endcomment %}
    {% for img in gallery %}
      <div class="relative bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden group animate-fade-in-up" data-animation-delay="{{ forloop.counter | add:facilities|length | add:1 | mul:0.2 }}">
        <img src="{{ img.image.url|default:'https://via.placeholder.com/600x400/3B82F6/FFFFFF?text=Futsal+Moment' }}" alt="{{ img.caption }}" class="w-full h-48 object-cover transition-transform duration-300 group-hover:scale-110">
        <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300">
          <p class="text-white text-lg font-semibold">{{ img.caption }}</p>
        </div>
      </div>
    {% empty %}
      <p class="col-span-full text-center text-gray-600 dark:text-gray-400 animate-fade-in-up" data-animation-delay="{{ facilities|length | add:gallery|length | add:1 | mul:0.2 }}">No gallery images available yet.</p>
    {% endfor %}
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('[data-animation-delay]').forEach(element => {
      const delay = element.getAttribute('data-animation-delay');
      if (delay) {
        element.style.animationDelay = `${delay}s`;
      }
    });
  });
</script>
{% endblock %}